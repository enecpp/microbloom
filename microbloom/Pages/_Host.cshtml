@page "/"
@namespace microbloom.Pages
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@using Microsoft.AspNetCore.Components.Web
<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="microbloom - Kariyer yolculuğunda en iyi iş fırsatlarını bulduğun platform">
    <meta name="theme-color" content="#00CED1">
    <base href="~/">
 
    <!-- Güvenlik: Tüm http isteklerini https'e yükselt -->
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="/images/favicon.svg?v=8">

    <title>microbloom - Kariyer Platformu</title>
    
    <!-- Bootstrap & Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    
    <!-- Critical Inline CSS -->
    <style>
        /* System Font Stack - NO Google Fonts! */
        * {
       font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Helvetica Neue', Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol' !important;
        }

    body {
            -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        }
        
        /* Loading state */
  #app-loading {
        display: flex;
            align-items: center;
   justify-content: center;
    height: 100vh;
   flex-direction: column;
   gap: 1rem;
        }
        
        .loading-spinner {
      width: 3rem;
    height: 3rem;
 border: 4px solid #e0f7fa;
            border-top-color: #00CED1;
         border-radius: 50%;
   animation: spin 1s linear infinite;
        }
    </style>
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="~/app.css?v=8">
    <component type="typeof(Microsoft.AspNetCore.Components.Web.HeadOutlet)" render-mode="Server" />
</head>
<body>
    <!-- Loading indicator -->
    <div id="app-loading" style="display: none;">
        <div class="loading-spinner"></div>
        <p style="color: #00CED1; font-weight: 600;">⏳ Yükleniyor...</p>
    </div>

    <component type="typeof(microbloom.App)" render-mode="Server" />

    <div id="blazor-error-ui">
        <environment include="Staging,Production">
          ⚠️ Bir hata oluştu. Sayfayı yenileyin.
        </environment>
        <environment include="Development">
      ⚠️ Bir hata oluştu. Detaylar için tarayıcı konsolunu kontrol edin.
        </environment>
   <a href="" class="reload">🔄 Yenile</a>
      <a class="dismiss">✖️ Kapat</a>
    </div>

    <!-- Scripts -->
    <script src="_framework/blazor.server.js" autostart="false"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
    
    <script>
        // Page load handler
        window.addEventListener('load', () => {
            document.getElementById('app-loading').style.display = 'none';
     console.log('%c✅ microbloom loaded successfully!', 'color: #00CED1; font-size: 16px; font-weight: bold;');
  console.log('Charset:', document.characterSet);
        });

        // Blazor manual start with reconnection options
        Blazor.start({
      reconnectionOptions: {
       maxRetries: 3,
     retryIntervalMilliseconds: 2000
            }
        }).then(() => {
  console.log('🔌 Blazor Server connected');
        });
    </script>
</body>
</html>
